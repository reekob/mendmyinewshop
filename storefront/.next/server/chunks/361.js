exports.id=361,exports.ids=[361],exports.modules={4347:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},8202:(e,t,s)=>{Promise.resolve().then(s.bind(s,2126)),Promise.resolve().then(s.bind(s,9935)),Promise.resolve().then(s.bind(s,3102))},2126:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>n});var r=s(326),a=s(3244),i=s(4976),l=s(7577);function n({children:e}){let[t]=(0,l.useState)(()=>new a.S({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1}}}));return r.jsx(i.aH,{client:t,children:e})}},9935:(e,t,s)=>{"use strict";s.d(t,{CartDrawer:()=>o});var r=s(326);s(7577);var a=s(434),i=s(4019),l=s(4565),n=s(5384),c=s(2125),d=s(7875);function o(){let{items:e,isOpen:t,closeCart:s,itemCount:o}=(0,n.x)(),m=o();return t?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity",onClick:s,"aria-hidden":"true"}),(0,r.jsxs)("div",{className:"fixed inset-y-0 right-0 w-full max-w-md bg-white shadow-xl z-50 flex flex-col",role:"dialog","aria-modal":"true","aria-labelledby":"cart-drawer-title",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 border-b border-gray-200",children:[(0,r.jsxs)("h2",{id:"cart-drawer-title",className:"text-lg font-semibold text-gray-900",children:["Your Cart ",m>0&&`(${m})`]}),r.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close cart",children:r.jsx(i.Z,{className:"w-5 h-5"})})]}),0===e.length?(0,r.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[r.jsx(l.Z,{className:"w-16 h-16 text-gray-300 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Your cart is empty"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"Add some items to get started"}),r.jsx("button",{onClick:s,className:"px-6 py-2 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors",children:"Continue Shopping"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"flex-1 overflow-y-auto px-4",children:r.jsx("div",{className:"divide-y divide-gray-200",children:e.map(e=>r.jsx(c.b,{item:e,compact:!0},e.id))})}),(0,r.jsxs)("div",{className:"border-t border-gray-200 px-4 pb-4",children:[r.jsx(d.V,{compact:!0}),r.jsx("div",{className:"mt-3 text-center",children:r.jsx(a.default,{href:"/cart",onClick:s,className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"View Full Cart"})})]})]})]})]}):null}},2125:(e,t,s)=>{"use strict";s.d(t,{b:()=>x});var r=s(326),a=s(1019),i=s(3855),l=s(4389),n=s(8091),c=s(1135);function d({previewUrl:e,fallbackUrl:t,alt:s,className:a}){let i=e||t||"/placeholder-product.png";return(0,r.jsxs)("div",{className:(0,c.W)("relative bg-gray-100 rounded overflow-hidden",a),children:[r.jsx("img",{src:i,alt:s,className:"w-full h-full object-cover"}),e&&r.jsx("div",{className:"absolute bottom-1 right-1",children:r.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-primary-600 text-white",children:"Custom"})})]})}var o=s(3188),m=s(5384);function x({item:e,compact:t=!1}){let{updateQuantity:s,removeItem:c}=(0,m.x)(),x=!!(e.design_data||e.design_preview_url),u=()=>{s(e.id,e.qty+1)},h=()=>{s(e.id,e.qty-1)},p=()=>{c(e.id)},g=()=>{alert("Edit design feature coming soon!")};return t?(0,r.jsxs)("div",{className:"flex gap-3 py-3",children:[r.jsx(d,{previewUrl:e.design_preview_url,fallbackUrl:e.image_url,alt:e.title,className:"w-16 h-16 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),x&&r.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-primary-100 text-primary-700 mt-0.5",children:"Custom Design"}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:h,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Decrease quantity",children:r.jsx(a.Z,{className:"w-4 h-4"})}),r.jsx("span",{className:"w-8 text-center text-sm font-medium",children:e.qty}),r.jsx("button",{onClick:u,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Increase quantity",children:r.jsx(i.Z,{className:"w-4 h-4"})})]}),r.jsx(o.n,{cents:e.price_cents*e.qty,className:"text-sm text-gray-900"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1 self-start",children:[x&&r.jsx("button",{onClick:g,className:"p-1 text-gray-400 hover:text-blue-500 transition-colors","aria-label":"Edit design",children:r.jsx(l.Z,{className:"w-4 h-4"})}),r.jsx("button",{onClick:p,className:"p-1 text-gray-400 hover:text-red-500 transition-colors","aria-label":"Remove item",children:r.jsx(n.Z,{className:"w-4 h-4"})})]})]}):(0,r.jsxs)("div",{className:"flex gap-4 py-4",children:[r.jsx(d,{previewUrl:e.design_preview_url,fallbackUrl:e.image_url,alt:e.title,className:"w-24 h-24 sm:w-32 sm:h-32 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-base font-medium text-gray-900",children:e.title}),x&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-primary-100 text-primary-700 mt-1",children:"Custom Design"}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["SKU: ",e.sku]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-1",children:[x&&r.jsx("button",{onClick:g,className:"p-2 text-gray-400 hover:text-blue-500 transition-colors","aria-label":"Edit design",children:r.jsx(l.Z,{className:"w-5 h-5"})}),r.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-red-500 transition-colors","aria-label":"Remove item",children:r.jsx(n.Z,{className:"w-5 h-5"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[r.jsx("button",{onClick:h,className:"p-2 text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Decrease quantity",children:r.jsx(a.Z,{className:"w-4 h-4"})}),r.jsx("span",{className:"w-12 text-center text-sm font-medium",children:e.qty}),r.jsx("button",{onClick:u,className:"p-2 text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Increase quantity",children:r.jsx(i.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx(o.n,{cents:e.price_cents*e.qty,className:"text-base text-gray-900"}),e.qty>1&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[r.jsx(o.n,{cents:e.price_cents})," each"]})]})]})]})]})}},7875:(e,t,s)=>{"use strict";s.d(t,{V:()=>d});var r=s(326),a=s(7577),i=s(7506),l=s(3188),n=s(5384),c=s(9040);function d({compact:e=!1}){let[t,s]=(0,a.useState)(""),{items:d,subtotalCents:o}=(0,n.x)(),{checkout:m,isLoading:x,error:u}=function(e={}){let[t,s]=(0,a.useState)(!1),[r,i]=(0,a.useState)(null),{items:l}=(0,n.x)();return{checkout:async t=>{if(0===l.length){let t=Error("Cart is empty");i(t),e.onError?.(t);return}s(!0),i(null);try{let s=await (0,c.hi)("/v1/carts",{method:"POST",body:{customer_email:t}}),r=l.map(e=>({sku:e.sku,qty:e.qty,...e.design_preview_url&&{design_preview_url:e.design_preview_url},...e.design_data&&{design_data:e.design_data},...e.design_assets&&{design_assets:e.design_assets}}));await (0,c.hi)(`/v1/carts/${s.id}/items`,{method:"POST",body:{items:r}});let a=`${window.location.origin}/success?session_id={CHECKOUT_SESSION_ID}`,i=`${window.location.origin}/cart`,n=await (0,c.hi)(`/v1/carts/${s.id}/checkout`,{method:"POST",body:{success_url:a,cancel_url:i,collect_shipping:!0,shipping_countries:["US"]}});e.onSuccess?.(),window.location.href=n.checkout_url}catch(s){let t=s instanceof Error?s:Error("Checkout failed");i(t),e.onError?.(t)}finally{s(!1)}},isLoading:t,error:r}}(),h=o(),p=0===d.length,g=e=>{e.preventDefault(),t&&!p&&m(t)},y=t.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);return e?(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("span",{className:"text-base font-medium text-gray-900",children:"Subtotal"}),r.jsx(l.n,{cents:h,className:"text-base text-gray-900"})]}),(0,r.jsxs)("form",{onSubmit:g,className:"space-y-3",children:[r.jsx("input",{type:"email",value:t,onChange:e=>s(e.target.value),placeholder:"Email for order confirmation",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0}),u&&r.jsx("p",{className:"text-sm text-red-600",children:u.message}),r.jsx("button",{type:"submit",disabled:p||!y||x,className:"w-full py-2 px-4 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?(0,r.jsxs)(r.Fragment,{children:[r.jsx(i.Z,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):"Checkout"})]}),r.jsx("p",{className:"mt-3 text-xs text-gray-500 text-center",children:"Shipping and taxes calculated at checkout"})]}):(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Summary"}),(0,r.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal"}),r.jsx(l.n,{cents:h,className:"text-gray-900"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Shipping"}),r.jsx("span",{className:"text-gray-500",children:"Calculated at checkout"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tax"}),r.jsx("span",{className:"text-gray-500",children:"Calculated at checkout"})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-3 flex justify-between",children:[r.jsx("span",{className:"text-base font-semibold text-gray-900",children:"Estimated Total"}),r.jsx(l.n,{cents:h,className:"text-base font-semibold text-gray-900"})]})]}),(0,r.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",value:t,onChange:e=>s(e.target.value),placeholder:"you@example.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"We'll send your order confirmation here"})]}),u&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:r.jsx("p",{className:"text-sm text-red-700",children:u.message})}),r.jsx("button",{type:"submit",disabled:p||!y||x,className:"w-full py-3 px-6 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?(0,r.jsxs)(r.Fragment,{children:[r.jsx(i.Z,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):"Proceed to Checkout"})]}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx("p",{className:"text-xs text-gray-500",children:"Secure checkout powered by Stripe"})})]})}},3102:(e,t,s)=>{"use strict";s.d(t,{Header:()=>n});var r=s(326),a=s(434),i=s(4565),l=s(5384);function n(){let{itemCount:e,toggleCart:t}=(0,l.x)(),s=e();return r.jsx("header",{className:"sticky top-0 z-30 bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[r.jsx(a.default,{href:"/",className:"text-xl font-bold text-gray-900",children:"CustomWear"}),r.jsx("nav",{className:"hidden md:flex items-center gap-8",children:r.jsx(a.default,{href:"/",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Shop"})}),(0,r.jsxs)("button",{onClick:t,className:"relative p-2 text-gray-600 hover:text-gray-900 transition-colors","aria-label":`Shopping cart with ${s} items`,children:[r.jsx(i.Z,{className:"w-6 h-6"}),s>0&&r.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-primary-600 text-white text-xs font-medium rounded-full flex items-center justify-center",children:s>99?"99+":s})]})]})})})}},3188:(e,t,s)=>{"use strict";s.d(t,{n:()=>i});var r=s(326),a=s(1135);function i({cents:e,className:t}){let s=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e/100);return r.jsx("span",{className:(0,a.W)("font-medium",t),children:s})}},9040:(e,t,s)=>{"use strict";s.d(t,{hi:()=>i,cT:()=>l});let r={apiUrl:"https://merchant.riki-dd7.workers.dev",apiKey:"pk_6cac8a6e66ed66449be88e9eda5140a68129720dac26e97d"};class a extends Error{constructor(e,t,s){super(s),this.status=e,this.code=t,this.name="ApiError"}}async function i(e,t={}){let{method:s="GET",body:i,headers:l={}}=t,n=`${r.apiUrl}${e}`,c=await fetch(n,{method:s,headers:{"Content-Type":"application/json",...r.apiKey&&{Authorization:`Bearer ${r.apiKey}`},...l},body:i?JSON.stringify(i):void 0}),d=await c.json();if(!c.ok)throw new a(c.status,d.error?.code||"unknown",d.error?.message||"An error occurred");return d}async function l(e){let t=new FormData;t.append("file",e);let s=await fetch(`${r.apiUrl}/v1/designs/upload`,{method:"POST",headers:{...r.apiKey&&{Authorization:`Bearer ${r.apiKey}`}},body:t}),i=await s.json();if(!s.ok)throw new a(s.status,i.error?.code||"upload_failed",i.error?.message||"Upload failed");return i}},5384:(e,t,s)=>{"use strict";s.d(t,{x:()=>i});var r=s(551),a=s(5251);let i=(0,r.Ue)()((0,a.tJ)((e,t)=>({items:[],isOpen:!1,editingItemId:null,addItem:t=>{let s=!!(t.design_data||t.design_preview_url);e(e=>{if(s){let s={...t,id:crypto.randomUUID()};return{items:[...e.items,s]}}let r=e.items.findIndex(e=>e.sku===t.sku&&!e.design_data&&!e.design_preview_url);if(r>=0){let s=[...e.items];return s[r]={...s[r],qty:s[r].qty+t.qty},{items:s}}let a={...t,id:t.sku};return{items:[...e.items,a]}})},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.id!==t)}))},updateQuantity:(s,r)=>{if(r<=0){t().removeItem(s);return}e(e=>({items:e.items.map(e=>e.id===s?{...e,qty:r}:e)}))},clearCart:()=>{e({items:[]})},openCart:()=>{e({isOpen:!0})},closeCart:()=>{e({isOpen:!1})},toggleCart:()=>{e(e=>({isOpen:!e.isOpen}))},setEditingItem:t=>{e({editingItemId:t})},updateItemDesign:(t,s,r,a)=>{e(e=>({items:e.items.map(e=>e.id===t?{...e,design_data:s,design_preview_url:r??e.design_preview_url,design_assets:a??e.design_assets}:e),editingItemId:null}))},itemCount:()=>t().items.reduce((e,t)=>e+t.qty,0),subtotalCents:()=>t().items.reduce((e,t)=>e+t.price_cents*t.qty,0)}),{name:"cart-storage",partialize:e=>({items:e.items})}))},7919:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x,metadata:()=>m});var r=s(9510),a=s(5317),i=s.n(a);s(5023);var l=s(8570);let n=(0,l.createProxy)(String.raw`/Users/riki/mendmyinewshop/storefront/src/app/providers.tsx#Providers`),c=(0,l.createProxy)(String.raw`/Users/riki/mendmyinewshop/storefront/src/components/layout/Header.tsx#Header`);function d(){return r.jsx("footer",{className:"bg-gray-50 border-t border-gray-200 mt-auto",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("p",{className:"text-center text-gray-500 text-sm",children:["\xa9 ",new Date().getFullYear()," CustomWear. All rights reserved."]})})})}let o=(0,l.createProxy)(String.raw`/Users/riki/mendmyinewshop/storefront/src/components/cart/CartDrawer.tsx#CartDrawer`),m={title:"Custom Clothing Store",description:"Design your own custom clothing"};function x({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:`${i().className} flex flex-col min-h-screen`,children:(0,r.jsxs)(n,{children:[r.jsx(c,{}),e,r.jsx(d,{}),r.jsx(o,{})]})})})}},5023:()=>{}};