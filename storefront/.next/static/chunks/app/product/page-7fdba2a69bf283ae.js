(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{4418:function(e,t,r){Promise.resolve().then(r.bind(r,7345))},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},7345:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(7437),i=r(9376),n=r(2265),a=r(6229),d=r(1994);function o(e){let{variants:t,selectedSku:r,onSelect:i}=e;return t.length<=1?null:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Select Option"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(e=>(0,s.jsx)("button",{onClick:()=>i(e.sku),className:(0,d.W)("px-4 py-2 border rounded-lg text-sm font-medium transition-colors",r===e.sku?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"),children:e.title},e.sku))})]})}var c=r(8510),l=r(6904);function u(e){var t,r,d;let{productId:u}=e,m=(0,i.useRouter)(),{data:p,isLoading:x,error:g}=(0,a.i)(u),[h,v]=(0,n.useState)(null),{addItem:f,openCart:y}=(0,l.x)();if((0,n.useEffect)(()=>{p&&!h&&p.variants.length>0&&v(p.variants[0].sku)},[p,h]),x)return(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"animate-pulse grid md:grid-cols-2 gap-8",children:[(0,s.jsx)("div",{className:"aspect-square bg-gray-200 rounded-lg"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-3/4"}),(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),(0,s.jsx)("div",{className:"h-24 bg-gray-200 rounded"})]})]})});if(g||!p)return(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:"Product not found."})});let b=p.variants.find(e=>e.sku===h)||p.variants[0],j=null===(d=p.mockup_config)||void 0===d?void 0:null===(r=d.views)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.mockupUrl,w=b.image_url||j||"/placeholder-product.png",N=()=>{f({sku:b.sku,title:"".concat(p.title," - ").concat(b.title),price_cents:b.price_cents,qty:1,image_url:w}),y()};return(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 lg:gap-12",children:[(0,s.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:(0,s.jsx)("img",{src:w,alt:p.title,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:p.title}),(0,s.jsx)(c.n,{cents:b.price_cents,className:"mt-2 text-2xl text-gray-900"})]}),p.description&&(0,s.jsx)("p",{className:"text-gray-600",children:p.description}),(0,s.jsx)(o,{variants:p.variants,selectedSku:h||"",onSelect:v}),(0,s.jsx)("div",{className:"space-y-3 pt-4",children:p.customizable?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{m.push("/customize?id=".concat(p.id,"&sku=").concat(b.sku))},className:"w-full py-3 px-6 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors",children:"Customize This Product"}),(0,s.jsx)("button",{onClick:N,className:"w-full py-3 px-6 bg-white text-gray-700 font-medium rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",children:"Add to Cart Without Customization"})]}):(0,s.jsx)("button",{onClick:N,className:"w-full py-3 px-6 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors",children:"Add to Cart"})}),p.customizable&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"This product can be customized with your own text, images, and designs."})]})]})})}function m(){let e=(0,i.useSearchParams)().get("id");return e?(0,s.jsx)(u,{productId:e}):(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:"No product ID specified."})})}function p(){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{className:"p-8 text-center",children:"Loading..."}),children:(0,s.jsx)(m,{})})}},8510:function(e,t,r){"use strict";r.d(t,{n:function(){return n}});var s=r(7437),i=r(1994);function n(e){let{cents:t,className:r}=e,n=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t/100);return(0,s.jsx)("span",{className:(0,i.W)("font-medium",r),children:n})}},6229:function(e,t,r){"use strict";r.d(t,{i:function(){return a},r:function(){return n}});var s=r(1713),i=r(1619);function n(){return(0,s.a)({queryKey:["products"],queryFn:async()=>{let e=await (0,i.hi)("/v1/products?status=active");return{products:e.items,pagination:e.pagination}}})}function a(e){return(0,s.a)({queryKey:["product",e],queryFn:()=>(0,i.hi)("/v1/products/".concat(e)),enabled:!!e})}},1619:function(e,t,r){"use strict";r.d(t,{hi:function(){return n},cT:function(){return a}});let s={apiUrl:"https://merchant.riki-dd7.workers.dev",apiKey:"pk_6cac8a6e66ed66449be88e9eda5140a68129720dac26e97d"};class i extends Error{constructor(e,t,r){super(r),this.status=e,this.code=t,this.name="ApiError"}}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:r="GET",body:n,headers:a={}}=t,d="".concat(s.apiUrl).concat(e),o=await fetch(d,{method:r,headers:{"Content-Type":"application/json",...s.apiKey&&{Authorization:"Bearer ".concat(s.apiKey)},...a},body:n?JSON.stringify(n):void 0}),c=await o.json();if(!o.ok){var l,u;throw new i(o.status,(null===(l=c.error)||void 0===l?void 0:l.code)||"unknown",(null===(u=c.error)||void 0===u?void 0:u.message)||"An error occurred")}return c}async function a(e){let t=new FormData;t.append("file",e);let r=await fetch("".concat(s.apiUrl,"/v1/designs/upload"),{method:"POST",headers:{...s.apiKey&&{Authorization:"Bearer ".concat(s.apiKey)}},body:t}),n=await r.json();if(!r.ok){var a,d;throw new i(r.status,(null===(a=n.error)||void 0===a?void 0:a.code)||"upload_failed",(null===(d=n.error)||void 0===d?void 0:d.message)||"Upload failed")}return n}},6904:function(e,t,r){"use strict";r.d(t,{x:function(){return n}});var s=r(9625),i=r(6885);let n=(0,s.Ue)()((0,i.tJ)((e,t)=>({items:[],isOpen:!1,editingItemId:null,addItem:t=>{let r=!!(t.design_data||t.design_preview_url);e(e=>{if(r){let r={...t,id:crypto.randomUUID()};return{items:[...e.items,r]}}let s=e.items.findIndex(e=>e.sku===t.sku&&!e.design_data&&!e.design_preview_url);if(s>=0){let r=[...e.items];return r[s]={...r[s],qty:r[s].qty+t.qty},{items:r}}let i={...t,id:t.sku};return{items:[...e.items,i]}})},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.id!==t)}))},updateQuantity:(r,s)=>{if(s<=0){t().removeItem(r);return}e(e=>({items:e.items.map(e=>e.id===r?{...e,qty:s}:e)}))},clearCart:()=>{e({items:[]})},openCart:()=>{e({isOpen:!0})},closeCart:()=>{e({isOpen:!1})},toggleCart:()=>{e(e=>({isOpen:!e.isOpen}))},setEditingItem:t=>{e({editingItemId:t})},updateItemDesign:(t,r,s,i)=>{e(e=>({items:e.items.map(e=>e.id===t?{...e,design_data:r,design_preview_url:null!=s?s:e.design_preview_url,design_assets:null!=i?i:e.design_assets}:e),editingItemId:null}))},itemCount:()=>t().items.reduce((e,t)=>e+t.qty,0),subtotalCents:()=>t().items.reduce((e,t)=>e+t.price_cents*t.qty,0)}),{name:"cart-storage",partialize:e=>({items:e.items})}))}},function(e){e.O(0,[883,661,713,971,117,744],function(){return e(e.s=4418)}),_N_E=e.O()}]);